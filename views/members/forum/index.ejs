<% include ../../partials/header %>
<div class="container mt-3 mb-3">
    <div class="row">
            <% include ../../partials/sidebar %>
    </div>
    <div class="row mt-3">
        <div class="col-md-12 head-room">
            <a class="btn btn-sm btn-primary" data-bs-toggle="collapse" href="#collapseExample" role="button" aria-expanded="false" aria-controls="collapseExample">
                Create New Topic
            </a>
            <div>
                <div class="collapse" id="collapseExample">
                    <form class="" action="/forum" method="POST">
                        <div class="row">
                            <div class="form-group col-xs-12">
                                <br>
                                <input class="form-control" type="text" name="name" placeholder="Topic Name">
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group col-xs-12">
                                <textarea class="form-control" name="description" placeholder="What is this topic about?" rows="10" cols="50"></textarea>
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group col-xs-12 text-center">
                                <input class="btn btn-primary" type="submit" value="Post">
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-12 head-room">
            <% forums.forEach((forum) => { %>
                <a href="/forum/<%= forum._id %>"><div class="well well-sm">
                    <h1><%= forum.name %></h1>
                    <h3><%= forum.author.username.toUpperCase() %></h3>
                    <hr>
                    <p><%= forum.description %></p>
                    <hr>
                    <div class="">
                        <p class="pull-right"><%= moment(forum.createdAt).fromNow() %></p>
                    </div>
                    <div>
                        <p><%= forum.comments.length %> Comments</p>
                    </div>
                </div></a>
            <% }) %>
        </div>
    </div>
</div>
<% include ../../partials/footer %>